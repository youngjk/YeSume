{"ast":null,"code":"/**\n * Copyright 2018 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst WebSocket = require('ws');\n/**\n * @implements {!Puppeteer.ConnectionTransport}\n */\n\n\nclass WebSocketTransport {\n  /**\n   * @param {string} url\n   * @return {!Promise<!WebSocketTransport>}\n   */\n  static create(url) {\n    return new Promise((resolve, reject) => {\n      const ws = new WebSocket(url, [], {\n        perMessageDeflate: false\n      });\n      ws.addEventListener('open', () => resolve(new WebSocketTransport(ws)));\n      ws.addEventListener('error', reject);\n    });\n  }\n  /**\n   * @param {!WebSocket} ws\n   */\n\n\n  constructor(ws) {\n    this._ws = ws;\n\n    this._ws.addEventListener('message', event => {\n      if (this.onmessage) this.onmessage.call(null, event.data);\n    });\n\n    this._ws.addEventListener('close', event => {\n      if (this.onclose) this.onclose.call(null);\n    }); // Silently ignore all errors - we don't know what to do with them.\n\n\n    this._ws.addEventListener('error', () => {});\n\n    this.onmessage = null;\n    this.onclose = null;\n  }\n  /**\n   * @param {string} message\n   */\n\n\n  send(message) {\n    this._ws.send(message);\n  }\n\n  close() {\n    this._ws.close();\n  }\n\n}\n\nmodule.exports = WebSocketTransport;","map":{"version":3,"sources":["/Users/pro/Desktop/Projects/yesume/src/node_test/node_modules/puppeteer/lib/WebSocketTransport.js"],"names":["WebSocket","require","WebSocketTransport","create","url","Promise","resolve","reject","ws","perMessageDeflate","addEventListener","constructor","_ws","event","onmessage","call","data","onclose","send","message","close","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,SAAS,GAAGC,OAAO,CAAC,IAAD,CAAzB;AAEA;AACA;AACA;;;AACA,MAAMC,kBAAN,CAAyB;AACvB;AACF;AACA;AACA;AACe,SAANC,MAAM,CAACC,GAAD,EAAM;AACjB,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtC,YAAMC,EAAE,GAAG,IAAIR,SAAJ,CAAcI,GAAd,EAAmB,EAAnB,EAAuB;AAAEK,QAAAA,iBAAiB,EAAE;AAArB,OAAvB,CAAX;AACAD,MAAAA,EAAE,CAACE,gBAAH,CAAoB,MAApB,EAA4B,MAAMJ,OAAO,CAAC,IAAIJ,kBAAJ,CAAuBM,EAAvB,CAAD,CAAzC;AACAA,MAAAA,EAAE,CAACE,gBAAH,CAAoB,OAApB,EAA6BH,MAA7B;AACD,KAJM,CAAP;AAKD;AAED;AACF;AACA;;;AACEI,EAAAA,WAAW,CAACH,EAAD,EAAK;AACd,SAAKI,GAAL,GAAWJ,EAAX;;AACA,SAAKI,GAAL,CAASF,gBAAT,CAA0B,SAA1B,EAAqCG,KAAK,IAAI;AAC5C,UAAI,KAAKC,SAAT,EACE,KAAKA,SAAL,CAAeC,IAAf,CAAoB,IAApB,EAA0BF,KAAK,CAACG,IAAhC;AACH,KAHD;;AAIA,SAAKJ,GAAL,CAASF,gBAAT,CAA0B,OAA1B,EAAmCG,KAAK,IAAI;AAC1C,UAAI,KAAKI,OAAT,EACE,KAAKA,OAAL,CAAaF,IAAb,CAAkB,IAAlB;AACH,KAHD,EANc,CAUd;;;AACA,SAAKH,GAAL,CAASF,gBAAT,CAA0B,OAA1B,EAAmC,MAAM,CAAE,CAA3C;;AACA,SAAKI,SAAL,GAAiB,IAAjB;AACA,SAAKG,OAAL,GAAe,IAAf;AACD;AAED;AACF;AACA;;;AACEC,EAAAA,IAAI,CAACC,OAAD,EAAU;AACZ,SAAKP,GAAL,CAASM,IAAT,CAAcC,OAAd;AACD;;AAEDC,EAAAA,KAAK,GAAG;AACN,SAAKR,GAAL,CAASQ,KAAT;AACD;;AAzCsB;;AA4CzBC,MAAM,CAACC,OAAP,GAAiBpB,kBAAjB","sourcesContent":["/**\n * Copyright 2018 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst WebSocket = require('ws');\n\n/**\n * @implements {!Puppeteer.ConnectionTransport}\n */\nclass WebSocketTransport {\n  /**\n   * @param {string} url\n   * @return {!Promise<!WebSocketTransport>}\n   */\n  static create(url) {\n    return new Promise((resolve, reject) => {\n      const ws = new WebSocket(url, [], { perMessageDeflate: false });\n      ws.addEventListener('open', () => resolve(new WebSocketTransport(ws)));\n      ws.addEventListener('error', reject);\n    });\n  }\n\n  /**\n   * @param {!WebSocket} ws\n   */\n  constructor(ws) {\n    this._ws = ws;\n    this._ws.addEventListener('message', event => {\n      if (this.onmessage)\n        this.onmessage.call(null, event.data);\n    });\n    this._ws.addEventListener('close', event => {\n      if (this.onclose)\n        this.onclose.call(null);\n    });\n    // Silently ignore all errors - we don't know what to do with them.\n    this._ws.addEventListener('error', () => {});\n    this.onmessage = null;\n    this.onclose = null;\n  }\n\n  /**\n   * @param {string} message\n   */\n  send(message) {\n    this._ws.send(message);\n  }\n\n  close() {\n    this._ws.close();\n  }\n}\n\nmodule.exports = WebSocketTransport;\n"]},"metadata":{},"sourceType":"module"}