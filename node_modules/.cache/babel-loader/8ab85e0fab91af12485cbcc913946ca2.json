{"ast":null,"code":"/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst fs = require('fs');\n\nconst EventEmitter = require('events');\n\nconst mime = require('mime');\n\nconst {\n  Events\n} = require('./Events');\n\nconst {\n  Connection\n} = require('./Connection');\n\nconst {\n  NetworkManager\n} = require('./NetworkManager');\n\nconst {\n  Dialog\n} = require('./Dialog');\n\nconst {\n  EmulationManager\n} = require('./EmulationManager');\n\nconst {\n  FrameManager\n} = require('./FrameManager');\n\nconst {\n  Keyboard,\n  Mouse,\n  Touchscreen\n} = require('./Input');\n\nconst Tracing = require('./Tracing');\n\nconst {\n  helper,\n  debugError,\n  assert\n} = require('./helper');\n\nconst {\n  Coverage\n} = require('./Coverage');\n\nconst {\n  Worker\n} = require('./Worker');\n\nconst {\n  createJSHandle\n} = require('./JSHandle');\n\nconst {\n  Accessibility\n} = require('./Accessibility');\n\nconst {\n  TimeoutSettings\n} = require('./TimeoutSettings');\n\nconst writeFileAsync = helper.promisify(fs.writeFile);\n\nclass Page extends EventEmitter {\n  /**\n   * @param {!Puppeteer.CDPSession} client\n   * @param {!Puppeteer.Target} target\n   * @param {boolean} ignoreHTTPSErrors\n   * @param {?Puppeteer.Viewport} defaultViewport\n   * @param {!Puppeteer.TaskQueue} screenshotTaskQueue\n   * @return {!Promise<!Page>}\n   */\n  static async create(client, target, ignoreHTTPSErrors, defaultViewport, screenshotTaskQueue) {\n    await client.send('Page.enable');\n    const {\n      frameTree\n    } = await client.send('Page.getFrameTree');\n    const page = new Page(client, target, frameTree, ignoreHTTPSErrors, screenshotTaskQueue);\n    await Promise.all([client.send('Target.setAutoAttach', {\n      autoAttach: true,\n      waitForDebuggerOnStart: false,\n      flatten: true\n    }), client.send('Page.setLifecycleEventsEnabled', {\n      enabled: true\n    }), client.send('Network.enable', {}), client.send('Runtime.enable', {}).then(() => page._frameManager.ensureSecondaryDOMWorld()), client.send('Security.enable', {}), client.send('Performance.enable', {}), client.send('Log.enable', {})]);\n    if (ignoreHTTPSErrors) await client.send('Security.setOverrideCertificateErrors', {\n      override: true\n    }); // Initialize default page size.\n\n    if (defaultViewport) await page.setViewport(defaultViewport);\n    return page;\n  }\n  /**\n   * @param {!Puppeteer.CDPSession} client\n   * @param {!Puppeteer.Target} target\n   * @param {!Protocol.Page.FrameTree} frameTree\n   * @param {boolean} ignoreHTTPSErrors\n   * @param {!Puppeteer.TaskQueue} screenshotTaskQueue\n   */\n\n\n  constructor(client, target, frameTree, ignoreHTTPSErrors, screenshotTaskQueue) {\n    super();\n    this._closed = false;\n    this._client = client;\n    this._target = target;\n    this._keyboard = new Keyboard(client);\n    this._mouse = new Mouse(client, this._keyboard);\n    this._timeoutSettings = new TimeoutSettings();\n    this._touchscreen = new Touchscreen(client, this._keyboard);\n    this._accessibility = new Accessibility(client);\n    this._networkManager = new NetworkManager(client);\n    /** @type {!FrameManager} */\n\n    this._frameManager = new FrameManager(client, frameTree, this, this._networkManager, this._timeoutSettings);\n\n    this._networkManager.setFrameManager(this._frameManager);\n\n    this._emulationManager = new EmulationManager(client);\n    this._tracing = new Tracing(client);\n    /** @type {!Map<string, Function>} */\n\n    this._pageBindings = new Map();\n    this._ignoreHTTPSErrors = ignoreHTTPSErrors;\n    this._coverage = new Coverage(client);\n    this._javascriptEnabled = true;\n    /** @type {?Puppeteer.Viewport} */\n\n    this._viewport = null;\n    this._screenshotTaskQueue = screenshotTaskQueue;\n    /** @type {!Map<string, Worker>} */\n\n    this._workers = new Map();\n    client.on('Target.attachedToTarget', event => {\n      if (event.targetInfo.type !== 'worker') {\n        // If we don't detach from service workers, they will never die.\n        client.send('Target.detachFromTarget', {\n          sessionId: event.sessionId\n        }).catch(debugError);\n        return;\n      }\n\n      const session = Connection.fromSession(client).session(event.sessionId);\n      const worker = new Worker(session, event.targetInfo.url, this._addConsoleMessage.bind(this), this._handleException.bind(this));\n\n      this._workers.set(event.sessionId, worker);\n\n      this.emit(Events.Page.WorkerCreated, worker);\n    });\n    client.on('Target.detachedFromTarget', event => {\n      const worker = this._workers.get(event.sessionId);\n\n      if (!worker) return;\n      this.emit(Events.Page.WorkerDestroyed, worker);\n\n      this._workers.delete(event.sessionId);\n    });\n\n    this._frameManager.on(Events.FrameManager.FrameAttached, event => this.emit(Events.Page.FrameAttached, event));\n\n    this._frameManager.on(Events.FrameManager.FrameDetached, event => this.emit(Events.Page.FrameDetached, event));\n\n    this._frameManager.on(Events.FrameManager.FrameNavigated, event => this.emit(Events.Page.FrameNavigated, event));\n\n    this._networkManager.on(Events.NetworkManager.Request, event => this.emit(Events.Page.Request, event));\n\n    this._networkManager.on(Events.NetworkManager.Response, event => this.emit(Events.Page.Response, event));\n\n    this._networkManager.on(Events.NetworkManager.RequestFailed, event => this.emit(Events.Page.RequestFailed, event));\n\n    this._networkManager.on(Events.NetworkManager.RequestFinished, event => this.emit(Events.Page.RequestFinished, event));\n\n    client.on('Page.domContentEventFired', event => this.emit(Events.Page.DOMContentLoaded));\n    client.on('Page.loadEventFired', event => this.emit(Events.Page.Load));\n    client.on('Runtime.consoleAPICalled', event => this._onConsoleAPI(event));\n    client.on('Runtime.bindingCalled', event => this._onBindingCalled(event));\n    client.on('Page.javascriptDialogOpening', event => this._onDialog(event));\n    client.on('Runtime.exceptionThrown', exception => this._handleException(exception.exceptionDetails));\n    client.on('Security.certificateError', event => this._onCertificateError(event));\n    client.on('Inspector.targetCrashed', event => this._onTargetCrashed());\n    client.on('Performance.metrics', event => this._emitMetrics(event));\n    client.on('Log.entryAdded', event => this._onLogEntryAdded(event));\n\n    this._target._isClosedPromise.then(() => {\n      this.emit(Events.Page.Close);\n      this._closed = true;\n    });\n  }\n  /**\n   * @param {!{longitude: number, latitude: number, accuracy: (number|undefined)}} options\n   */\n\n\n  async setGeolocation(options) {\n    const {\n      longitude,\n      latitude,\n      accuracy = 0\n    } = options;\n    if (longitude < -180 || longitude > 180) throw new Error(`Invalid longitude \"${longitude}\": precondition -180 <= LONGITUDE <= 180 failed.`);\n    if (latitude < -90 || latitude > 90) throw new Error(`Invalid latitude \"${latitude}\": precondition -90 <= LATITUDE <= 90 failed.`);\n    if (accuracy < 0) throw new Error(`Invalid accuracy \"${accuracy}\": precondition 0 <= ACCURACY failed.`);\n    await this._client.send('Emulation.setGeolocationOverride', {\n      longitude,\n      latitude,\n      accuracy\n    });\n  }\n  /**\n   * @return {!Puppeteer.Target}\n   */\n\n\n  target() {\n    return this._target;\n  }\n  /**\n   * @return {!Puppeteer.Browser}\n   */\n\n\n  browser() {\n    return this._target.browser();\n  }\n  /**\n   * @return {!Puppeteer.BrowserContext}\n   */\n\n\n  browserContext() {\n    return this._target.browserContext();\n  }\n\n  _onTargetCrashed() {\n    this.emit('error', new Error('Page crashed!'));\n  }\n  /**\n   * @param {!Protocol.Log.entryAddedPayload} event\n   */\n\n\n  _onLogEntryAdded(event) {\n    const {\n      level,\n      text,\n      args,\n      source,\n      url,\n      lineNumber\n    } = event.entry;\n    if (args) args.map(arg => helper.releaseObject(this._client, arg));\n    if (source !== 'worker') this.emit(Events.Page.Console, new ConsoleMessage(level, text, [], {\n      url,\n      lineNumber\n    }));\n  }\n  /**\n   * @return {!Puppeteer.Frame}\n   */\n\n\n  mainFrame() {\n    return this._frameManager.mainFrame();\n  }\n  /**\n   * @return {!Keyboard}\n   */\n\n\n  get keyboard() {\n    return this._keyboard;\n  }\n  /**\n   * @return {!Touchscreen}\n   */\n\n\n  get touchscreen() {\n    return this._touchscreen;\n  }\n  /**\n   * @return {!Coverage}\n   */\n\n\n  get coverage() {\n    return this._coverage;\n  }\n  /**\n   * @return {!Tracing}\n   */\n\n\n  get tracing() {\n    return this._tracing;\n  }\n  /**\n   * @return {!Accessibility}\n   */\n\n\n  get accessibility() {\n    return this._accessibility;\n  }\n  /**\n   * @return {!Array<Puppeteer.Frame>}\n   */\n\n\n  frames() {\n    return this._frameManager.frames();\n  }\n  /**\n   * @return {!Array<!Worker>}\n   */\n\n\n  workers() {\n    return Array.from(this._workers.values());\n  }\n  /**\n   * @param {boolean} value\n   */\n\n\n  async setRequestInterception(value) {\n    return this._networkManager.setRequestInterception(value);\n  }\n  /**\n   * @param {boolean} enabled\n   */\n\n\n  setOfflineMode(enabled) {\n    return this._networkManager.setOfflineMode(enabled);\n  }\n  /**\n   * @param {number} timeout\n   */\n\n\n  setDefaultNavigationTimeout(timeout) {\n    this._timeoutSettings.setDefaultNavigationTimeout(timeout);\n  }\n  /**\n   * @param {number} timeout\n   */\n\n\n  setDefaultTimeout(timeout) {\n    this._timeoutSettings.setDefaultTimeout(timeout);\n  }\n  /**\n   * @param {!Protocol.Security.certificateErrorPayload} event\n   */\n\n\n  _onCertificateError(event) {\n    if (!this._ignoreHTTPSErrors) return;\n\n    this._client.send('Security.handleCertificateError', {\n      eventId: event.eventId,\n      action: 'continue'\n    }).catch(debugError);\n  }\n  /**\n   * @param {string} selector\n   * @return {!Promise<?Puppeteer.ElementHandle>}\n   */\n\n\n  async $(selector) {\n    return this.mainFrame().$(selector);\n  }\n  /**\n   * @param {Function|string} pageFunction\n   * @param {!Array<*>} args\n   * @return {!Promise<!Puppeteer.JSHandle>}\n   */\n\n\n  async evaluateHandle(pageFunction, ...args) {\n    const context = await this.mainFrame().executionContext();\n    return context.evaluateHandle(pageFunction, ...args);\n  }\n  /**\n   * @param {!Puppeteer.JSHandle} prototypeHandle\n   * @return {!Promise<!Puppeteer.JSHandle>}\n   */\n\n\n  async queryObjects(prototypeHandle) {\n    const context = await this.mainFrame().executionContext();\n    return context.queryObjects(prototypeHandle);\n  }\n  /**\n   * @param {string} selector\n   * @param {Function|string} pageFunction\n   * @param {!Array<*>} args\n   * @return {!Promise<(!Object|undefined)>}\n   */\n\n\n  async $eval(selector, pageFunction, ...args) {\n    return this.mainFrame().$eval(selector, pageFunction, ...args);\n  }\n  /**\n   * @param {string} selector\n   * @param {Function|string} pageFunction\n   * @param {!Array<*>} args\n   * @return {!Promise<(!Object|undefined)>}\n   */\n\n\n  async $$eval(selector, pageFunction, ...args) {\n    return this.mainFrame().$$eval(selector, pageFunction, ...args);\n  }\n  /**\n   * @param {string} selector\n   * @return {!Promise<!Array<!Puppeteer.ElementHandle>>}\n   */\n\n\n  async $$(selector) {\n    return this.mainFrame().$$(selector);\n  }\n  /**\n   * @param {string} expression\n   * @return {!Promise<!Array<!Puppeteer.ElementHandle>>}\n   */\n\n\n  async $x(expression) {\n    return this.mainFrame().$x(expression);\n  }\n  /**\n   * @param {!Array<string>} urls\n   * @return {!Promise<!Array<Network.Cookie>>}\n   */\n\n\n  async cookies(...urls) {\n    return (await this._client.send('Network.getCookies', {\n      urls: urls.length ? urls : [this.url()]\n    })).cookies;\n  }\n  /**\n   * @param {Array<Protocol.Network.deleteCookiesParameters>} cookies\n   */\n\n\n  async deleteCookie(...cookies) {\n    const pageURL = this.url();\n\n    for (const cookie of cookies) {\n      const item = Object.assign({}, cookie);\n      if (!cookie.url && pageURL.startsWith('http')) item.url = pageURL;\n      await this._client.send('Network.deleteCookies', item);\n    }\n  }\n  /**\n   * @param {Array<Network.CookieParam>} cookies\n   */\n\n\n  async setCookie(...cookies) {\n    const pageURL = this.url();\n    const startsWithHTTP = pageURL.startsWith('http');\n    const items = cookies.map(cookie => {\n      const item = Object.assign({}, cookie);\n      if (!item.url && startsWithHTTP) item.url = pageURL;\n      assert(item.url !== 'about:blank', `Blank page can not have cookie \"${item.name}\"`);\n      assert(!String.prototype.startsWith.call(item.url || '', 'data:'), `Data URL page can not have cookie \"${item.name}\"`);\n      return item;\n    });\n    await this.deleteCookie(...items);\n    if (items.length) await this._client.send('Network.setCookies', {\n      cookies: items\n    });\n  }\n  /**\n   * @param {!{url?: string, path?: string, content?: string, type?: string}} options\n   * @return {!Promise<!Puppeteer.ElementHandle>}\n   */\n\n\n  async addScriptTag(options) {\n    return this.mainFrame().addScriptTag(options);\n  }\n  /**\n   * @param {!{url?: string, path?: string, content?: string}} options\n   * @return {!Promise<!Puppeteer.ElementHandle>}\n   */\n\n\n  async addStyleTag(options) {\n    return this.mainFrame().addStyleTag(options);\n  }\n  /**\n   * @param {string} name\n   * @param {Function} puppeteerFunction\n   */\n\n\n  async exposeFunction(name, puppeteerFunction) {\n    if (this._pageBindings.has(name)) throw new Error(`Failed to add page binding with name ${name}: window['${name}'] already exists!`);\n\n    this._pageBindings.set(name, puppeteerFunction);\n\n    const expression = helper.evaluationString(addPageBinding, name);\n    await this._client.send('Runtime.addBinding', {\n      name: name\n    });\n    await this._client.send('Page.addScriptToEvaluateOnNewDocument', {\n      source: expression\n    });\n    await Promise.all(this.frames().map(frame => frame.evaluate(expression).catch(debugError)));\n\n    function addPageBinding(bindingName) {\n      const binding = window[bindingName];\n\n      window[bindingName] = (...args) => {\n        const me = window[bindingName];\n        let callbacks = me['callbacks'];\n\n        if (!callbacks) {\n          callbacks = new Map();\n          me['callbacks'] = callbacks;\n        }\n\n        const seq = (me['lastSeq'] || 0) + 1;\n        me['lastSeq'] = seq;\n        const promise = new Promise((resolve, reject) => callbacks.set(seq, {\n          resolve,\n          reject\n        }));\n        binding(JSON.stringify({\n          name: bindingName,\n          seq,\n          args\n        }));\n        return promise;\n      };\n    }\n  }\n  /**\n   * @param {?{username: string, password: string}} credentials\n   */\n\n\n  async authenticate(credentials) {\n    return this._networkManager.authenticate(credentials);\n  }\n  /**\n   * @param {!Object<string, string>} headers\n   */\n\n\n  async setExtraHTTPHeaders(headers) {\n    return this._networkManager.setExtraHTTPHeaders(headers);\n  }\n  /**\n   * @param {string} userAgent\n   */\n\n\n  async setUserAgent(userAgent) {\n    return this._networkManager.setUserAgent(userAgent);\n  }\n  /**\n   * @return {!Promise<!Metrics>}\n   */\n\n\n  async metrics() {\n    const response = await this._client.send('Performance.getMetrics');\n    return this._buildMetricsObject(response.metrics);\n  }\n  /**\n   * @param {!Protocol.Performance.metricsPayload} event\n   */\n\n\n  _emitMetrics(event) {\n    this.emit(Events.Page.Metrics, {\n      title: event.title,\n      metrics: this._buildMetricsObject(event.metrics)\n    });\n  }\n  /**\n   * @param {?Array<!Protocol.Performance.Metric>} metrics\n   * @return {!Metrics}\n   */\n\n\n  _buildMetricsObject(metrics) {\n    const result = {};\n\n    for (const metric of metrics || []) {\n      if (supportedMetrics.has(metric.name)) result[metric.name] = metric.value;\n    }\n\n    return result;\n  }\n  /**\n   * @param {!Protocol.Runtime.ExceptionDetails} exceptionDetails\n   */\n\n\n  _handleException(exceptionDetails) {\n    const message = helper.getExceptionMessage(exceptionDetails);\n    const err = new Error(message);\n    err.stack = ''; // Don't report clientside error with a node stack attached\n\n    this.emit(Events.Page.PageError, err);\n  }\n  /**\n   * @param {!Protocol.Runtime.consoleAPICalledPayload} event\n   */\n\n\n  async _onConsoleAPI(event) {\n    if (event.executionContextId === 0) {\n      // DevTools protocol stores the last 1000 console messages. These\n      // messages are always reported even for removed execution contexts. In\n      // this case, they are marked with executionContextId = 0 and are\n      // reported upon enabling Runtime agent.\n      //\n      // Ignore these messages since:\n      // - there's no execution context we can use to operate with message\n      //   arguments\n      // - these messages are reported before Puppeteer clients can subscribe\n      //   to the 'console'\n      //   page event.\n      //\n      // @see https://github.com/GoogleChrome/puppeteer/issues/3865\n      return;\n    }\n\n    const context = this._frameManager.executionContextById(event.executionContextId);\n\n    const values = event.args.map(arg => createJSHandle(context, arg));\n\n    this._addConsoleMessage(event.type, values, event.stackTrace);\n  }\n  /**\n   * @param {!Protocol.Runtime.bindingCalledPayload} event\n   */\n\n\n  async _onBindingCalled(event) {\n    const {\n      name,\n      seq,\n      args\n    } = JSON.parse(event.payload);\n    let expression = null;\n\n    try {\n      const result = await this._pageBindings.get(name)(...args);\n      expression = helper.evaluationString(deliverResult, name, seq, result);\n    } catch (error) {\n      if (error instanceof Error) expression = helper.evaluationString(deliverError, name, seq, error.message, error.stack);else expression = helper.evaluationString(deliverErrorValue, name, seq, error);\n    }\n\n    this._client.send('Runtime.evaluate', {\n      expression,\n      contextId: event.executionContextId\n    }).catch(debugError);\n    /**\n     * @param {string} name\n     * @param {number} seq\n     * @param {*} result\n     */\n\n\n    function deliverResult(name, seq, result) {\n      window[name]['callbacks'].get(seq).resolve(result);\n      window[name]['callbacks'].delete(seq);\n    }\n    /**\n     * @param {string} name\n     * @param {number} seq\n     * @param {string} message\n     * @param {string} stack\n     */\n\n\n    function deliverError(name, seq, message, stack) {\n      const error = new Error(message);\n      error.stack = stack;\n      window[name]['callbacks'].get(seq).reject(error);\n      window[name]['callbacks'].delete(seq);\n    }\n    /**\n     * @param {string} name\n     * @param {number} seq\n     * @param {*} value\n     */\n\n\n    function deliverErrorValue(name, seq, value) {\n      window[name]['callbacks'].get(seq).reject(value);\n      window[name]['callbacks'].delete(seq);\n    }\n  }\n  /**\n   * @param {string} type\n   * @param {!Array<!Puppeteer.JSHandle>} args\n   * @param {Protocol.Runtime.StackTrace=} stackTrace\n   */\n\n\n  _addConsoleMessage(type, args, stackTrace) {\n    if (!this.listenerCount(Events.Page.Console)) {\n      args.forEach(arg => arg.dispose());\n      return;\n    }\n\n    const textTokens = [];\n\n    for (const arg of args) {\n      const remoteObject = arg._remoteObject;\n      if (remoteObject.objectId) textTokens.push(arg.toString());else textTokens.push(helper.valueFromRemoteObject(remoteObject));\n    }\n\n    const location = stackTrace && stackTrace.callFrames.length ? {\n      url: stackTrace.callFrames[0].url,\n      lineNumber: stackTrace.callFrames[0].lineNumber,\n      columnNumber: stackTrace.callFrames[0].columnNumber\n    } : {};\n    const message = new ConsoleMessage(type, textTokens.join(' '), args, location);\n    this.emit(Events.Page.Console, message);\n  }\n\n  _onDialog(event) {\n    let dialogType = null;\n    if (event.type === 'alert') dialogType = Dialog.Type.Alert;else if (event.type === 'confirm') dialogType = Dialog.Type.Confirm;else if (event.type === 'prompt') dialogType = Dialog.Type.Prompt;else if (event.type === 'beforeunload') dialogType = Dialog.Type.BeforeUnload;\n    assert(dialogType, 'Unknown javascript dialog type: ' + event.type);\n    const dialog = new Dialog(this._client, dialogType, event.message, event.defaultPrompt);\n    this.emit(Events.Page.Dialog, dialog);\n  }\n  /**\n   * @return {!string}\n   */\n\n\n  url() {\n    return this.mainFrame().url();\n  }\n  /**\n   * @return {!Promise<string>}\n   */\n\n\n  async content() {\n    return await this._frameManager.mainFrame().content();\n  }\n  /**\n   * @param {string} html\n   * @param {!{timeout?: number, waitUntil?: string|!Array<string>}=} options\n   */\n\n\n  async setContent(html, options) {\n    await this._frameManager.mainFrame().setContent(html, options);\n  }\n  /**\n   * @param {string} url\n   * @param {!{referer?: string, timeout?: number, waitUntil?: string|!Array<string>}=} options\n   * @return {!Promise<?Puppeteer.Response>}\n   */\n\n\n  async goto(url, options) {\n    return await this._frameManager.mainFrame().goto(url, options);\n  }\n  /**\n   * @param {!{timeout?: number, waitUntil?: string|!Array<string>}=} options\n   * @return {!Promise<?Puppeteer.Response>}\n   */\n\n\n  async reload(options) {\n    const [response] = await Promise.all([this.waitForNavigation(options), this._client.send('Page.reload')]);\n    return response;\n  }\n  /**\n   * @param {!{timeout?: number, waitUntil?: string|!Array<string>}=} options\n   * @return {!Promise<?Puppeteer.Response>}\n   */\n\n\n  async waitForNavigation(options = {}) {\n    return await this._frameManager.mainFrame().waitForNavigation(options);\n  }\n  /**\n   * @param {(string|Function)} urlOrPredicate\n   * @param {!{timeout?: number}=} options\n   * @return {!Promise<!Puppeteer.Request>}\n   */\n\n\n  async waitForRequest(urlOrPredicate, options = {}) {\n    const {\n      timeout = this._timeoutSettings.timeout()\n    } = options;\n    return helper.waitForEvent(this._networkManager, Events.NetworkManager.Request, request => {\n      if (helper.isString(urlOrPredicate)) return urlOrPredicate === request.url();\n      if (typeof urlOrPredicate === 'function') return !!urlOrPredicate(request);\n      return false;\n    }, timeout);\n  }\n  /**\n   * @param {(string|Function)} urlOrPredicate\n   * @param {!{timeout?: number}=} options\n   * @return {!Promise<!Puppeteer.Response>}\n   */\n\n\n  async waitForResponse(urlOrPredicate, options = {}) {\n    const {\n      timeout = this._timeoutSettings.timeout()\n    } = options;\n    return helper.waitForEvent(this._networkManager, Events.NetworkManager.Response, response => {\n      if (helper.isString(urlOrPredicate)) return urlOrPredicate === response.url();\n      if (typeof urlOrPredicate === 'function') return !!urlOrPredicate(response);\n      return false;\n    }, timeout);\n  }\n  /**\n   * @param {!{timeout?: number, waitUntil?: string|!Array<string>}=} options\n   * @return {!Promise<?Puppeteer.Response>}\n   */\n\n\n  async goBack(options) {\n    return this._go(-1, options);\n  }\n  /**\n   * @param {!{timeout?: number, waitUntil?: string|!Array<string>}=} options\n   * @return {!Promise<?Puppeteer.Response>}\n   */\n\n\n  async goForward(options) {\n    return this._go(+1, options);\n  }\n  /**\n   * @param {!{timeout?: number, waitUntil?: string|!Array<string>}=} options\n   * @return {!Promise<?Puppeteer.Response>}\n   */\n\n\n  async _go(delta, options) {\n    const history = await this._client.send('Page.getNavigationHistory');\n    const entry = history.entries[history.currentIndex + delta];\n    if (!entry) return null;\n    const [response] = await Promise.all([this.waitForNavigation(options), this._client.send('Page.navigateToHistoryEntry', {\n      entryId: entry.id\n    })]);\n    return response;\n  }\n\n  async bringToFront() {\n    await this._client.send('Page.bringToFront');\n  }\n  /**\n   * @param {!{viewport: !Puppeteer.Viewport, userAgent: string}} options\n   */\n\n\n  async emulate(options) {\n    await Promise.all([this.setViewport(options.viewport), this.setUserAgent(options.userAgent)]);\n  }\n  /**\n   * @param {boolean} enabled\n   */\n\n\n  async setJavaScriptEnabled(enabled) {\n    if (this._javascriptEnabled === enabled) return;\n    this._javascriptEnabled = enabled;\n    await this._client.send('Emulation.setScriptExecutionDisabled', {\n      value: !enabled\n    });\n  }\n  /**\n   * @param {boolean} enabled\n   */\n\n\n  async setBypassCSP(enabled) {\n    await this._client.send('Page.setBypassCSP', {\n      enabled\n    });\n  }\n  /**\n   * @param {?string} mediaType\n   */\n\n\n  async emulateMedia(mediaType) {\n    assert(mediaType === 'screen' || mediaType === 'print' || mediaType === null, 'Unsupported media type: ' + mediaType);\n    await this._client.send('Emulation.setEmulatedMedia', {\n      media: mediaType || ''\n    });\n  }\n  /**\n   * @param {!Puppeteer.Viewport} viewport\n   */\n\n\n  async setViewport(viewport) {\n    const needsReload = await this._emulationManager.emulateViewport(viewport);\n    this._viewport = viewport;\n    if (needsReload) await this.reload();\n  }\n  /**\n   * @return {?Puppeteer.Viewport}\n   */\n\n\n  viewport() {\n    return this._viewport;\n  }\n  /**\n   * @param {Function|string} pageFunction\n   * @param {!Array<*>} args\n   * @return {!Promise<*>}\n   */\n\n\n  async evaluate(pageFunction, ...args) {\n    return this._frameManager.mainFrame().evaluate(pageFunction, ...args);\n  }\n  /**\n   * @param {Function|string} pageFunction\n   * @param {!Array<*>} args\n   */\n\n\n  async evaluateOnNewDocument(pageFunction, ...args) {\n    const source = helper.evaluationString(pageFunction, ...args);\n    await this._client.send('Page.addScriptToEvaluateOnNewDocument', {\n      source\n    });\n  }\n  /**\n   * @param {boolean} enabled\n   */\n\n\n  async setCacheEnabled(enabled = true) {\n    await this._client.send('Network.setCacheDisabled', {\n      cacheDisabled: !enabled\n    });\n  }\n  /**\n   * @param {!ScreenshotOptions=} options\n   * @return {!Promise<!Buffer|!String>}\n   */\n\n\n  async screenshot(options = {}) {\n    let screenshotType = null; // options.type takes precedence over inferring the type from options.path\n    // because it may be a 0-length file with no extension created beforehand (i.e. as a temp file).\n\n    if (options.type) {\n      assert(options.type === 'png' || options.type === 'jpeg', 'Unknown options.type value: ' + options.type);\n      screenshotType = options.type;\n    } else if (options.path) {\n      const mimeType = mime.getType(options.path);\n      if (mimeType === 'image/png') screenshotType = 'png';else if (mimeType === 'image/jpeg') screenshotType = 'jpeg';\n      assert(screenshotType, 'Unsupported screenshot mime type: ' + mimeType);\n    }\n\n    if (!screenshotType) screenshotType = 'png';\n\n    if (options.quality) {\n      assert(screenshotType === 'jpeg', 'options.quality is unsupported for the ' + screenshotType + ' screenshots');\n      assert(typeof options.quality === 'number', 'Expected options.quality to be a number but found ' + typeof options.quality);\n      assert(Number.isInteger(options.quality), 'Expected options.quality to be an integer');\n      assert(options.quality >= 0 && options.quality <= 100, 'Expected options.quality to be between 0 and 100 (inclusive), got ' + options.quality);\n    }\n\n    assert(!options.clip || !options.fullPage, 'options.clip and options.fullPage are exclusive');\n\n    if (options.clip) {\n      assert(typeof options.clip.x === 'number', 'Expected options.clip.x to be a number but found ' + typeof options.clip.x);\n      assert(typeof options.clip.y === 'number', 'Expected options.clip.y to be a number but found ' + typeof options.clip.y);\n      assert(typeof options.clip.width === 'number', 'Expected options.clip.width to be a number but found ' + typeof options.clip.width);\n      assert(typeof options.clip.height === 'number', 'Expected options.clip.height to be a number but found ' + typeof options.clip.height);\n      assert(options.clip.width !== 0, 'Expected options.clip.width not to be 0.');\n      assert(options.clip.height !== 0, 'Expected options.clip.width not to be 0.');\n    }\n\n    return this._screenshotTaskQueue.postTask(this._screenshotTask.bind(this, screenshotType, options));\n  }\n  /**\n   * @param {\"png\"|\"jpeg\"} format\n   * @param {!ScreenshotOptions=} options\n   * @return {!Promise<!Buffer|!String>}\n   */\n\n\n  async _screenshotTask(format, options) {\n    await this._client.send('Target.activateTarget', {\n      targetId: this._target._targetId\n    });\n    let clip = options.clip ? processClip(options.clip) : undefined;\n\n    if (options.fullPage) {\n      const metrics = await this._client.send('Page.getLayoutMetrics');\n      const width = Math.ceil(metrics.contentSize.width);\n      const height = Math.ceil(metrics.contentSize.height); // Overwrite clip for full page at all times.\n\n      clip = {\n        x: 0,\n        y: 0,\n        width,\n        height,\n        scale: 1\n      };\n      const {\n        isMobile = false,\n        deviceScaleFactor = 1,\n        isLandscape = false\n      } = this._viewport || {};\n      /** @type {!Protocol.Emulation.ScreenOrientation} */\n\n      const screenOrientation = isLandscape ? {\n        angle: 90,\n        type: 'landscapePrimary'\n      } : {\n        angle: 0,\n        type: 'portraitPrimary'\n      };\n      await this._client.send('Emulation.setDeviceMetricsOverride', {\n        mobile: isMobile,\n        width,\n        height,\n        deviceScaleFactor,\n        screenOrientation\n      });\n    }\n\n    const shouldSetDefaultBackground = options.omitBackground && format === 'png';\n    if (shouldSetDefaultBackground) await this._client.send('Emulation.setDefaultBackgroundColorOverride', {\n      color: {\n        r: 0,\n        g: 0,\n        b: 0,\n        a: 0\n      }\n    });\n    const result = await this._client.send('Page.captureScreenshot', {\n      format,\n      quality: options.quality,\n      clip\n    });\n    if (shouldSetDefaultBackground) await this._client.send('Emulation.setDefaultBackgroundColorOverride');\n    if (options.fullPage && this._viewport) await this.setViewport(this._viewport);\n    const buffer = options.encoding === 'base64' ? result.data : Buffer.from(result.data, 'base64');\n    if (options.path) await writeFileAsync(options.path, buffer);\n    return buffer;\n\n    function processClip(clip) {\n      const x = Math.round(clip.x);\n      const y = Math.round(clip.y);\n      const width = Math.round(clip.width + clip.x - x);\n      const height = Math.round(clip.height + clip.y - y);\n      return {\n        x,\n        y,\n        width,\n        height,\n        scale: 1\n      };\n    }\n  }\n  /**\n   * @param {!PDFOptions=} options\n   * @return {!Promise<!Buffer>}\n   */\n\n\n  async pdf(options = {}) {\n    const {\n      scale = 1,\n      displayHeaderFooter = false,\n      headerTemplate = '',\n      footerTemplate = '',\n      printBackground = false,\n      landscape = false,\n      pageRanges = '',\n      preferCSSPageSize = false,\n      margin = {},\n      path = null\n    } = options;\n    let paperWidth = 8.5;\n    let paperHeight = 11;\n\n    if (options.format) {\n      const format = Page.PaperFormats[options.format.toLowerCase()];\n      assert(format, 'Unknown paper format: ' + options.format);\n      paperWidth = format.width;\n      paperHeight = format.height;\n    } else {\n      paperWidth = convertPrintParameterToInches(options.width) || paperWidth;\n      paperHeight = convertPrintParameterToInches(options.height) || paperHeight;\n    }\n\n    const marginTop = convertPrintParameterToInches(margin.top) || 0;\n    const marginLeft = convertPrintParameterToInches(margin.left) || 0;\n    const marginBottom = convertPrintParameterToInches(margin.bottom) || 0;\n    const marginRight = convertPrintParameterToInches(margin.right) || 0;\n    const result = await this._client.send('Page.printToPDF', {\n      landscape,\n      displayHeaderFooter,\n      headerTemplate,\n      footerTemplate,\n      printBackground,\n      scale,\n      paperWidth,\n      paperHeight,\n      marginTop,\n      marginBottom,\n      marginLeft,\n      marginRight,\n      pageRanges,\n      preferCSSPageSize\n    });\n    const buffer = Buffer.from(result.data, 'base64');\n    if (path !== null) await writeFileAsync(path, buffer);\n    return buffer;\n  }\n  /**\n   * @return {!Promise<string>}\n   */\n\n\n  async title() {\n    return this.mainFrame().title();\n  }\n  /**\n   * @param {!{runBeforeUnload: (boolean|undefined)}=} options\n   */\n\n\n  async close(options = {\n    runBeforeUnload: undefined\n  }) {\n    assert(!!this._client._connection, 'Protocol error: Connection closed. Most likely the page has been closed.');\n    const runBeforeUnload = !!options.runBeforeUnload;\n\n    if (runBeforeUnload) {\n      await this._client.send('Page.close');\n    } else {\n      await this._client._connection.send('Target.closeTarget', {\n        targetId: this._target._targetId\n      });\n      await this._target._isClosedPromise;\n    }\n  }\n  /**\n   * @return {boolean}\n   */\n\n\n  isClosed() {\n    return this._closed;\n  }\n  /**\n   * @return {!Mouse}\n   */\n\n\n  get mouse() {\n    return this._mouse;\n  }\n  /**\n   * @param {string} selector\n   * @param {!{delay?: number, button?: \"left\"|\"right\"|\"middle\", clickCount?: number}=} options\n   */\n\n\n  click(selector, options = {}) {\n    return this.mainFrame().click(selector, options);\n  }\n  /**\n   * @param {string} selector\n   */\n\n\n  focus(selector) {\n    return this.mainFrame().focus(selector);\n  }\n  /**\n   * @param {string} selector\n   */\n\n\n  hover(selector) {\n    return this.mainFrame().hover(selector);\n  }\n  /**\n   * @param {string} selector\n   * @param {!Array<string>} values\n   * @return {!Promise<!Array<string>>}\n   */\n\n\n  select(selector, ...values) {\n    return this.mainFrame().select(selector, ...values);\n  }\n  /**\n   * @param {string} selector\n   */\n\n\n  tap(selector) {\n    return this.mainFrame().tap(selector);\n  }\n  /**\n   * @param {string} selector\n   * @param {string} text\n   * @param {{delay: (number|undefined)}=} options\n   */\n\n\n  type(selector, text, options) {\n    return this.mainFrame().type(selector, text, options);\n  }\n  /**\n   * @param {(string|number|Function)} selectorOrFunctionOrTimeout\n   * @param {!Object=} options\n   * @param {!Array<*>} args\n   * @return {!Promise<!Puppeteer.JSHandle>}\n   */\n\n\n  waitFor(selectorOrFunctionOrTimeout, options = {}, ...args) {\n    return this.mainFrame().waitFor(selectorOrFunctionOrTimeout, options, ...args);\n  }\n  /**\n   * @param {string} selector\n   * @param {!{visible?: boolean, hidden?: boolean, timeout?: number}=} options\n   * @return {!Promise<?Puppeteer.ElementHandle>}\n   */\n\n\n  waitForSelector(selector, options = {}) {\n    return this.mainFrame().waitForSelector(selector, options);\n  }\n  /**\n   * @param {string} xpath\n   * @param {!{visible?: boolean, hidden?: boolean, timeout?: number}=} options\n   * @return {!Promise<?Puppeteer.ElementHandle>}\n   */\n\n\n  waitForXPath(xpath, options = {}) {\n    return this.mainFrame().waitForXPath(xpath, options);\n  }\n  /**\n   * @param {Function} pageFunction\n   * @param {!{polling?: string|number, timeout?: number}=} options\n   * @param {!Array<*>} args\n   * @return {!Promise<!Puppeteer.JSHandle>}\n   */\n\n\n  waitForFunction(pageFunction, options = {}, ...args) {\n    return this.mainFrame().waitForFunction(pageFunction, options, ...args);\n  }\n\n}\n/**\n * @typedef {Object} PDFOptions\n * @property {number=} scale\n * @property {boolean=} displayHeaderFooter\n * @property {string=} headerTemplate\n * @property {string=} footerTemplate\n * @property {boolean=} printBackground\n * @property {boolean=} landscape\n * @property {string=} pageRanges\n * @property {string=} format\n * @property {string|number=} width\n * @property {string|number=} height\n * @property {boolean=} preferCSSPageSize\n * @property {!{top?: string|number, bottom?: string|number, left?: string|number, right?: string|number}=} margin\n * @property {string=} path\n */\n\n/**\n * @typedef {Object} Metrics\n * @property {number=} Timestamp\n * @property {number=} Documents\n * @property {number=} Frames\n * @property {number=} JSEventListeners\n * @property {number=} Nodes\n * @property {number=} LayoutCount\n * @property {number=} RecalcStyleCount\n * @property {number=} LayoutDuration\n * @property {number=} RecalcStyleDuration\n * @property {number=} ScriptDuration\n * @property {number=} TaskDuration\n * @property {number=} JSHeapUsedSize\n * @property {number=} JSHeapTotalSize\n */\n\n/**\n * @typedef {Object} ScreenshotOptions\n * @property {string=} type\n * @property {string=} path\n * @property {boolean=} fullPage\n * @property {{x: number, y: number, width: number, height: number}=} clip\n * @property {number=} quality\n * @property {boolean=} omitBackground\n * @property {string=} encoding\n */\n\n/** @type {!Set<string>} */\n\n\nconst supportedMetrics = new Set(['Timestamp', 'Documents', 'Frames', 'JSEventListeners', 'Nodes', 'LayoutCount', 'RecalcStyleCount', 'LayoutDuration', 'RecalcStyleDuration', 'ScriptDuration', 'TaskDuration', 'JSHeapUsedSize', 'JSHeapTotalSize']);\n/** @enum {!{width: number, height: number}} */\n\nPage.PaperFormats = {\n  letter: {\n    width: 8.5,\n    height: 11\n  },\n  legal: {\n    width: 8.5,\n    height: 14\n  },\n  tabloid: {\n    width: 11,\n    height: 17\n  },\n  ledger: {\n    width: 17,\n    height: 11\n  },\n  a0: {\n    width: 33.1,\n    height: 46.8\n  },\n  a1: {\n    width: 23.4,\n    height: 33.1\n  },\n  a2: {\n    width: 16.5,\n    height: 23.4\n  },\n  a3: {\n    width: 11.7,\n    height: 16.5\n  },\n  a4: {\n    width: 8.27,\n    height: 11.7\n  },\n  a5: {\n    width: 5.83,\n    height: 8.27\n  },\n  a6: {\n    width: 4.13,\n    height: 5.83\n  }\n};\nconst unitToPixels = {\n  'px': 1,\n  'in': 96,\n  'cm': 37.8,\n  'mm': 3.78\n};\n/**\n * @param {(string|number|undefined)} parameter\n * @return {(number|undefined)}\n */\n\nfunction convertPrintParameterToInches(parameter) {\n  if (typeof parameter === 'undefined') return undefined;\n  let pixels;\n\n  if (helper.isNumber(parameter)) {\n    // Treat numbers as pixel values to be aligned with phantom's paperSize.\n    pixels =\n    /** @type {number} */\n    parameter;\n  } else if (helper.isString(parameter)) {\n    const text =\n    /** @type {string} */\n    parameter;\n    let unit = text.substring(text.length - 2).toLowerCase();\n    let valueText = '';\n\n    if (unitToPixels.hasOwnProperty(unit)) {\n      valueText = text.substring(0, text.length - 2);\n    } else {\n      // In case of unknown unit try to parse the whole parameter as number of pixels.\n      // This is consistent with phantom's paperSize behavior.\n      unit = 'px';\n      valueText = text;\n    }\n\n    const value = Number(valueText);\n    assert(!isNaN(value), 'Failed to parse parameter value: ' + text);\n    pixels = value * unitToPixels[unit];\n  } else {\n    throw new Error('page.pdf() Cannot handle parameter type: ' + typeof parameter);\n  }\n\n  return pixels / 96;\n}\n/**\n * @typedef {Object} Network.Cookie\n * @property {string} name\n * @property {string} value\n * @property {string} domain\n * @property {string} path\n * @property {number} expires\n * @property {number} size\n * @property {boolean} httpOnly\n * @property {boolean} secure\n * @property {boolean} session\n * @property {(\"Strict\"|\"Lax\")=} sameSite\n */\n\n/**\n * @typedef {Object} Network.CookieParam\n * @property {string} name\n * @property {string} value\n * @property {string=} url\n * @property {string=} domain\n * @property {string=} path\n * @property {number=} expires\n * @property {boolean=} httpOnly\n * @property {boolean=} secure\n * @property {(\"Strict\"|\"Lax\")=} sameSite\n */\n\n/**\n * @typedef {Object} ConsoleMessage.Location\n * @property {string=} url\n * @property {number=} lineNumber\n * @property {number=} columnNumber\n */\n\n\nclass ConsoleMessage {\n  /**\n   * @param {string} type\n   * @param {string} text\n   * @param {!Array<!Puppeteer.JSHandle>} args\n   * @param {ConsoleMessage.Location} location\n   */\n  constructor(type, text, args, location = {}) {\n    this._type = type;\n    this._text = text;\n    this._args = args;\n    this._location = location;\n  }\n  /**\n   * @return {string}\n   */\n\n\n  type() {\n    return this._type;\n  }\n  /**\n   * @return {string}\n   */\n\n\n  text() {\n    return this._text;\n  }\n  /**\n   * @return {!Array<!Puppeteer.JSHandle>}\n   */\n\n\n  args() {\n    return this._args;\n  }\n  /**\n   * @return {Object}\n   */\n\n\n  location() {\n    return this._location;\n  }\n\n}\n\nmodule.exports = {\n  Page,\n  ConsoleMessage\n};","map":{"version":3,"sources":["/Users/pro/Desktop/Projects/yesume/node_modules/puppeteer/lib/Page.js"],"names":["fs","require","EventEmitter","mime","Events","Connection","NetworkManager","Dialog","EmulationManager","FrameManager","Keyboard","Mouse","Touchscreen","Tracing","helper","debugError","assert","Coverage","Worker","createJSHandle","Accessibility","TimeoutSettings","writeFileAsync","promisify","writeFile","Page","create","client","target","ignoreHTTPSErrors","defaultViewport","screenshotTaskQueue","send","frameTree","page","Promise","all","autoAttach","waitForDebuggerOnStart","flatten","enabled","then","_frameManager","ensureSecondaryDOMWorld","override","setViewport","constructor","_closed","_client","_target","_keyboard","_mouse","_timeoutSettings","_touchscreen","_accessibility","_networkManager","setFrameManager","_emulationManager","_tracing","_pageBindings","Map","_ignoreHTTPSErrors","_coverage","_javascriptEnabled","_viewport","_screenshotTaskQueue","_workers","on","event","targetInfo","type","sessionId","catch","session","fromSession","worker","url","_addConsoleMessage","bind","_handleException","set","emit","WorkerCreated","get","WorkerDestroyed","delete","FrameAttached","FrameDetached","FrameNavigated","Request","Response","RequestFailed","RequestFinished","DOMContentLoaded","Load","_onConsoleAPI","_onBindingCalled","_onDialog","exception","exceptionDetails","_onCertificateError","_onTargetCrashed","_emitMetrics","_onLogEntryAdded","_isClosedPromise","Close","setGeolocation","options","longitude","latitude","accuracy","Error","browser","browserContext","level","text","args","source","lineNumber","entry","map","arg","releaseObject","Console","ConsoleMessage","mainFrame","keyboard","touchscreen","coverage","tracing","accessibility","frames","workers","Array","from","values","setRequestInterception","value","setOfflineMode","setDefaultNavigationTimeout","timeout","setDefaultTimeout","eventId","action","$","selector","evaluateHandle","pageFunction","context","executionContext","queryObjects","prototypeHandle","$eval","$$eval","$$","$x","expression","cookies","urls","length","deleteCookie","pageURL","cookie","item","Object","assign","startsWith","setCookie","startsWithHTTP","items","name","String","prototype","call","addScriptTag","addStyleTag","exposeFunction","puppeteerFunction","has","evaluationString","addPageBinding","frame","evaluate","bindingName","binding","window","me","callbacks","seq","promise","resolve","reject","JSON","stringify","authenticate","credentials","setExtraHTTPHeaders","headers","setUserAgent","userAgent","metrics","response","_buildMetricsObject","Metrics","title","result","metric","supportedMetrics","message","getExceptionMessage","err","stack","PageError","executionContextId","executionContextById","stackTrace","parse","payload","deliverResult","error","deliverError","deliverErrorValue","contextId","listenerCount","forEach","dispose","textTokens","remoteObject","_remoteObject","objectId","push","toString","valueFromRemoteObject","location","callFrames","columnNumber","join","dialogType","Type","Alert","Confirm","Prompt","BeforeUnload","dialog","defaultPrompt","content","setContent","html","goto","reload","waitForNavigation","waitForRequest","urlOrPredicate","waitForEvent","request","isString","waitForResponse","goBack","_go","goForward","delta","history","entries","currentIndex","entryId","id","bringToFront","emulate","viewport","setJavaScriptEnabled","setBypassCSP","emulateMedia","mediaType","media","needsReload","emulateViewport","evaluateOnNewDocument","setCacheEnabled","cacheDisabled","screenshot","screenshotType","path","mimeType","getType","quality","Number","isInteger","clip","fullPage","x","y","width","height","postTask","_screenshotTask","format","targetId","_targetId","processClip","undefined","Math","ceil","contentSize","scale","isMobile","deviceScaleFactor","isLandscape","screenOrientation","angle","mobile","shouldSetDefaultBackground","omitBackground","color","r","g","b","a","buffer","encoding","data","Buffer","round","pdf","displayHeaderFooter","headerTemplate","footerTemplate","printBackground","landscape","pageRanges","preferCSSPageSize","margin","paperWidth","paperHeight","PaperFormats","toLowerCase","convertPrintParameterToInches","marginTop","top","marginLeft","left","marginBottom","bottom","marginRight","right","close","runBeforeUnload","_connection","isClosed","mouse","click","focus","hover","select","tap","waitFor","selectorOrFunctionOrTimeout","waitForSelector","waitForXPath","xpath","waitForFunction","Set","letter","legal","tabloid","ledger","a0","a1","a2","a3","a4","a5","a6","unitToPixels","parameter","pixels","isNumber","unit","substring","valueText","hasOwnProperty","isNaN","_type","_text","_args","_location","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst fs = require('fs');\nconst EventEmitter = require('events');\nconst mime = require('mime');\nconst {Events} = require('./Events');\nconst {Connection} = require('./Connection');\nconst {NetworkManager} = require('./NetworkManager');\nconst {Dialog} = require('./Dialog');\nconst {EmulationManager} = require('./EmulationManager');\nconst {FrameManager} = require('./FrameManager');\nconst {Keyboard, Mouse, Touchscreen} = require('./Input');\nconst Tracing = require('./Tracing');\nconst {helper, debugError, assert} = require('./helper');\nconst {Coverage} = require('./Coverage');\nconst {Worker} = require('./Worker');\nconst {createJSHandle} = require('./JSHandle');\nconst {Accessibility} = require('./Accessibility');\nconst {TimeoutSettings} = require('./TimeoutSettings');\nconst writeFileAsync = helper.promisify(fs.writeFile);\n\nclass Page extends EventEmitter {\n  /**\n   * @param {!Puppeteer.CDPSession} client\n   * @param {!Puppeteer.Target} target\n   * @param {boolean} ignoreHTTPSErrors\n   * @param {?Puppeteer.Viewport} defaultViewport\n   * @param {!Puppeteer.TaskQueue} screenshotTaskQueue\n   * @return {!Promise<!Page>}\n   */\n  static async create(client, target, ignoreHTTPSErrors, defaultViewport, screenshotTaskQueue) {\n\n    await client.send('Page.enable');\n    const {frameTree} = await client.send('Page.getFrameTree');\n    const page = new Page(client, target, frameTree, ignoreHTTPSErrors, screenshotTaskQueue);\n    await Promise.all([\n      client.send('Target.setAutoAttach', {autoAttach: true, waitForDebuggerOnStart: false, flatten: true}),\n      client.send('Page.setLifecycleEventsEnabled', { enabled: true }),\n      client.send('Network.enable', {}),\n      client.send('Runtime.enable', {}).then(() => page._frameManager.ensureSecondaryDOMWorld()),\n      client.send('Security.enable', {}),\n      client.send('Performance.enable', {}),\n      client.send('Log.enable', {}),\n    ]);\n    if (ignoreHTTPSErrors)\n      await client.send('Security.setOverrideCertificateErrors', {override: true});\n    // Initialize default page size.\n    if (defaultViewport)\n      await page.setViewport(defaultViewport);\n\n    return page;\n  }\n\n  /**\n   * @param {!Puppeteer.CDPSession} client\n   * @param {!Puppeteer.Target} target\n   * @param {!Protocol.Page.FrameTree} frameTree\n   * @param {boolean} ignoreHTTPSErrors\n   * @param {!Puppeteer.TaskQueue} screenshotTaskQueue\n   */\n  constructor(client, target, frameTree, ignoreHTTPSErrors, screenshotTaskQueue) {\n    super();\n    this._closed = false;\n    this._client = client;\n    this._target = target;\n    this._keyboard = new Keyboard(client);\n    this._mouse = new Mouse(client, this._keyboard);\n    this._timeoutSettings = new TimeoutSettings();\n    this._touchscreen = new Touchscreen(client, this._keyboard);\n    this._accessibility = new Accessibility(client);\n    this._networkManager = new NetworkManager(client);\n    /** @type {!FrameManager} */\n    this._frameManager = new FrameManager(client, frameTree, this, this._networkManager, this._timeoutSettings);\n    this._networkManager.setFrameManager(this._frameManager);\n    this._emulationManager = new EmulationManager(client);\n    this._tracing = new Tracing(client);\n    /** @type {!Map<string, Function>} */\n    this._pageBindings = new Map();\n    this._ignoreHTTPSErrors = ignoreHTTPSErrors;\n    this._coverage = new Coverage(client);\n    this._javascriptEnabled = true;\n    /** @type {?Puppeteer.Viewport} */\n    this._viewport = null;\n\n    this._screenshotTaskQueue = screenshotTaskQueue;\n\n    /** @type {!Map<string, Worker>} */\n    this._workers = new Map();\n    client.on('Target.attachedToTarget', event => {\n      if (event.targetInfo.type !== 'worker') {\n        // If we don't detach from service workers, they will never die.\n        client.send('Target.detachFromTarget', {\n          sessionId: event.sessionId\n        }).catch(debugError);\n        return;\n      }\n      const session = Connection.fromSession(client).session(event.sessionId);\n      const worker = new Worker(session, event.targetInfo.url, this._addConsoleMessage.bind(this), this._handleException.bind(this));\n      this._workers.set(event.sessionId, worker);\n      this.emit(Events.Page.WorkerCreated, worker);\n    });\n    client.on('Target.detachedFromTarget', event => {\n      const worker = this._workers.get(event.sessionId);\n      if (!worker)\n        return;\n      this.emit(Events.Page.WorkerDestroyed, worker);\n      this._workers.delete(event.sessionId);\n    });\n\n    this._frameManager.on(Events.FrameManager.FrameAttached, event => this.emit(Events.Page.FrameAttached, event));\n    this._frameManager.on(Events.FrameManager.FrameDetached, event => this.emit(Events.Page.FrameDetached, event));\n    this._frameManager.on(Events.FrameManager.FrameNavigated, event => this.emit(Events.Page.FrameNavigated, event));\n\n    this._networkManager.on(Events.NetworkManager.Request, event => this.emit(Events.Page.Request, event));\n    this._networkManager.on(Events.NetworkManager.Response, event => this.emit(Events.Page.Response, event));\n    this._networkManager.on(Events.NetworkManager.RequestFailed, event => this.emit(Events.Page.RequestFailed, event));\n    this._networkManager.on(Events.NetworkManager.RequestFinished, event => this.emit(Events.Page.RequestFinished, event));\n\n    client.on('Page.domContentEventFired', event => this.emit(Events.Page.DOMContentLoaded));\n    client.on('Page.loadEventFired', event => this.emit(Events.Page.Load));\n    client.on('Runtime.consoleAPICalled', event => this._onConsoleAPI(event));\n    client.on('Runtime.bindingCalled', event => this._onBindingCalled(event));\n    client.on('Page.javascriptDialogOpening', event => this._onDialog(event));\n    client.on('Runtime.exceptionThrown', exception => this._handleException(exception.exceptionDetails));\n    client.on('Security.certificateError', event => this._onCertificateError(event));\n    client.on('Inspector.targetCrashed', event => this._onTargetCrashed());\n    client.on('Performance.metrics', event => this._emitMetrics(event));\n    client.on('Log.entryAdded', event => this._onLogEntryAdded(event));\n    this._target._isClosedPromise.then(() => {\n      this.emit(Events.Page.Close);\n      this._closed = true;\n    });\n  }\n\n  /**\n   * @param {!{longitude: number, latitude: number, accuracy: (number|undefined)}} options\n   */\n  async setGeolocation(options) {\n    const { longitude, latitude, accuracy = 0} = options;\n    if (longitude < -180 || longitude > 180)\n      throw new Error(`Invalid longitude \"${longitude}\": precondition -180 <= LONGITUDE <= 180 failed.`);\n    if (latitude < -90 || latitude > 90)\n      throw new Error(`Invalid latitude \"${latitude}\": precondition -90 <= LATITUDE <= 90 failed.`);\n    if (accuracy < 0)\n      throw new Error(`Invalid accuracy \"${accuracy}\": precondition 0 <= ACCURACY failed.`);\n    await this._client.send('Emulation.setGeolocationOverride', {longitude, latitude, accuracy});\n  }\n\n  /**\n   * @return {!Puppeteer.Target}\n   */\n  target() {\n    return this._target;\n  }\n\n  /**\n   * @return {!Puppeteer.Browser}\n   */\n  browser() {\n    return this._target.browser();\n  }\n\n  /**\n   * @return {!Puppeteer.BrowserContext}\n   */\n  browserContext() {\n    return this._target.browserContext();\n  }\n\n  _onTargetCrashed() {\n    this.emit('error', new Error('Page crashed!'));\n  }\n\n  /**\n   * @param {!Protocol.Log.entryAddedPayload} event\n   */\n  _onLogEntryAdded(event) {\n    const {level, text, args, source, url, lineNumber} = event.entry;\n    if (args)\n      args.map(arg => helper.releaseObject(this._client, arg));\n    if (source !== 'worker')\n      this.emit(Events.Page.Console, new ConsoleMessage(level, text, [], {url, lineNumber}));\n  }\n\n  /**\n   * @return {!Puppeteer.Frame}\n   */\n  mainFrame() {\n    return this._frameManager.mainFrame();\n  }\n\n  /**\n   * @return {!Keyboard}\n   */\n  get keyboard() {\n    return this._keyboard;\n  }\n\n  /**\n   * @return {!Touchscreen}\n   */\n  get touchscreen() {\n    return this._touchscreen;\n  }\n\n  /**\n   * @return {!Coverage}\n   */\n  get coverage() {\n    return this._coverage;\n  }\n\n  /**\n   * @return {!Tracing}\n   */\n  get tracing() {\n    return this._tracing;\n  }\n\n  /**\n   * @return {!Accessibility}\n   */\n  get accessibility() {\n    return this._accessibility;\n  }\n\n  /**\n   * @return {!Array<Puppeteer.Frame>}\n   */\n  frames() {\n    return this._frameManager.frames();\n  }\n\n  /**\n   * @return {!Array<!Worker>}\n   */\n  workers() {\n    return Array.from(this._workers.values());\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  async setRequestInterception(value) {\n    return this._networkManager.setRequestInterception(value);\n  }\n\n  /**\n   * @param {boolean} enabled\n   */\n  setOfflineMode(enabled) {\n    return this._networkManager.setOfflineMode(enabled);\n  }\n\n  /**\n   * @param {number} timeout\n   */\n  setDefaultNavigationTimeout(timeout) {\n    this._timeoutSettings.setDefaultNavigationTimeout(timeout);\n  }\n\n  /**\n   * @param {number} timeout\n   */\n  setDefaultTimeout(timeout) {\n    this._timeoutSettings.setDefaultTimeout(timeout);\n  }\n\n  /**\n   * @param {!Protocol.Security.certificateErrorPayload} event\n   */\n  _onCertificateError(event) {\n    if (!this._ignoreHTTPSErrors)\n      return;\n    this._client.send('Security.handleCertificateError', {\n      eventId: event.eventId,\n      action: 'continue'\n    }).catch(debugError);\n  }\n\n  /**\n   * @param {string} selector\n   * @return {!Promise<?Puppeteer.ElementHandle>}\n   */\n  async $(selector) {\n    return this.mainFrame().$(selector);\n  }\n\n  /**\n   * @param {Function|string} pageFunction\n   * @param {!Array<*>} args\n   * @return {!Promise<!Puppeteer.JSHandle>}\n   */\n  async evaluateHandle(pageFunction, ...args) {\n    const context = await this.mainFrame().executionContext();\n    return context.evaluateHandle(pageFunction, ...args);\n  }\n\n  /**\n   * @param {!Puppeteer.JSHandle} prototypeHandle\n   * @return {!Promise<!Puppeteer.JSHandle>}\n   */\n  async queryObjects(prototypeHandle) {\n    const context = await this.mainFrame().executionContext();\n    return context.queryObjects(prototypeHandle);\n  }\n\n  /**\n   * @param {string} selector\n   * @param {Function|string} pageFunction\n   * @param {!Array<*>} args\n   * @return {!Promise<(!Object|undefined)>}\n   */\n  async $eval(selector, pageFunction, ...args) {\n    return this.mainFrame().$eval(selector, pageFunction, ...args);\n  }\n\n  /**\n   * @param {string} selector\n   * @param {Function|string} pageFunction\n   * @param {!Array<*>} args\n   * @return {!Promise<(!Object|undefined)>}\n   */\n  async $$eval(selector, pageFunction, ...args) {\n    return this.mainFrame().$$eval(selector, pageFunction, ...args);\n  }\n\n  /**\n   * @param {string} selector\n   * @return {!Promise<!Array<!Puppeteer.ElementHandle>>}\n   */\n  async $$(selector) {\n    return this.mainFrame().$$(selector);\n  }\n\n  /**\n   * @param {string} expression\n   * @return {!Promise<!Array<!Puppeteer.ElementHandle>>}\n   */\n  async $x(expression) {\n    return this.mainFrame().$x(expression);\n  }\n\n  /**\n   * @param {!Array<string>} urls\n   * @return {!Promise<!Array<Network.Cookie>>}\n   */\n  async cookies(...urls) {\n    return (await this._client.send('Network.getCookies', {\n      urls: urls.length ? urls : [this.url()]\n    })).cookies;\n  }\n\n  /**\n   * @param {Array<Protocol.Network.deleteCookiesParameters>} cookies\n   */\n  async deleteCookie(...cookies) {\n    const pageURL = this.url();\n    for (const cookie of cookies) {\n      const item = Object.assign({}, cookie);\n      if (!cookie.url && pageURL.startsWith('http'))\n        item.url = pageURL;\n      await this._client.send('Network.deleteCookies', item);\n    }\n  }\n\n  /**\n   * @param {Array<Network.CookieParam>} cookies\n   */\n  async setCookie(...cookies) {\n    const pageURL = this.url();\n    const startsWithHTTP = pageURL.startsWith('http');\n    const items = cookies.map(cookie => {\n      const item = Object.assign({}, cookie);\n      if (!item.url && startsWithHTTP)\n        item.url = pageURL;\n      assert(item.url !== 'about:blank', `Blank page can not have cookie \"${item.name}\"`);\n      assert(!String.prototype.startsWith.call(item.url || '', 'data:'), `Data URL page can not have cookie \"${item.name}\"`);\n      return item;\n    });\n    await this.deleteCookie(...items);\n    if (items.length)\n      await this._client.send('Network.setCookies', { cookies: items });\n  }\n\n  /**\n   * @param {!{url?: string, path?: string, content?: string, type?: string}} options\n   * @return {!Promise<!Puppeteer.ElementHandle>}\n   */\n  async addScriptTag(options) {\n    return this.mainFrame().addScriptTag(options);\n  }\n\n  /**\n   * @param {!{url?: string, path?: string, content?: string}} options\n   * @return {!Promise<!Puppeteer.ElementHandle>}\n   */\n  async addStyleTag(options) {\n    return this.mainFrame().addStyleTag(options);\n  }\n\n  /**\n   * @param {string} name\n   * @param {Function} puppeteerFunction\n   */\n  async exposeFunction(name, puppeteerFunction) {\n    if (this._pageBindings.has(name))\n      throw new Error(`Failed to add page binding with name ${name}: window['${name}'] already exists!`);\n    this._pageBindings.set(name, puppeteerFunction);\n\n    const expression = helper.evaluationString(addPageBinding, name);\n    await this._client.send('Runtime.addBinding', {name: name});\n    await this._client.send('Page.addScriptToEvaluateOnNewDocument', {source: expression});\n    await Promise.all(this.frames().map(frame => frame.evaluate(expression).catch(debugError)));\n\n    function addPageBinding(bindingName) {\n      const binding = window[bindingName];\n      window[bindingName] = (...args) => {\n        const me = window[bindingName];\n        let callbacks = me['callbacks'];\n        if (!callbacks) {\n          callbacks = new Map();\n          me['callbacks'] = callbacks;\n        }\n        const seq = (me['lastSeq'] || 0) + 1;\n        me['lastSeq'] = seq;\n        const promise = new Promise((resolve, reject) => callbacks.set(seq, {resolve, reject}));\n        binding(JSON.stringify({name: bindingName, seq, args}));\n        return promise;\n      };\n    }\n  }\n\n  /**\n   * @param {?{username: string, password: string}} credentials\n   */\n  async authenticate(credentials) {\n    return this._networkManager.authenticate(credentials);\n  }\n\n  /**\n   * @param {!Object<string, string>} headers\n   */\n  async setExtraHTTPHeaders(headers) {\n    return this._networkManager.setExtraHTTPHeaders(headers);\n  }\n\n  /**\n   * @param {string} userAgent\n   */\n  async setUserAgent(userAgent) {\n    return this._networkManager.setUserAgent(userAgent);\n  }\n\n  /**\n   * @return {!Promise<!Metrics>}\n   */\n  async metrics() {\n    const response = await this._client.send('Performance.getMetrics');\n    return this._buildMetricsObject(response.metrics);\n  }\n\n  /**\n   * @param {!Protocol.Performance.metricsPayload} event\n   */\n  _emitMetrics(event) {\n    this.emit(Events.Page.Metrics, {\n      title: event.title,\n      metrics: this._buildMetricsObject(event.metrics)\n    });\n  }\n\n  /**\n   * @param {?Array<!Protocol.Performance.Metric>} metrics\n   * @return {!Metrics}\n   */\n  _buildMetricsObject(metrics) {\n    const result = {};\n    for (const metric of metrics || []) {\n      if (supportedMetrics.has(metric.name))\n        result[metric.name] = metric.value;\n    }\n    return result;\n  }\n\n  /**\n   * @param {!Protocol.Runtime.ExceptionDetails} exceptionDetails\n   */\n  _handleException(exceptionDetails) {\n    const message = helper.getExceptionMessage(exceptionDetails);\n    const err = new Error(message);\n    err.stack = ''; // Don't report clientside error with a node stack attached\n    this.emit(Events.Page.PageError, err);\n  }\n\n  /**\n   * @param {!Protocol.Runtime.consoleAPICalledPayload} event\n   */\n  async _onConsoleAPI(event) {\n    if (event.executionContextId === 0) {\n      // DevTools protocol stores the last 1000 console messages. These\n      // messages are always reported even for removed execution contexts. In\n      // this case, they are marked with executionContextId = 0 and are\n      // reported upon enabling Runtime agent.\n      //\n      // Ignore these messages since:\n      // - there's no execution context we can use to operate with message\n      //   arguments\n      // - these messages are reported before Puppeteer clients can subscribe\n      //   to the 'console'\n      //   page event.\n      //\n      // @see https://github.com/GoogleChrome/puppeteer/issues/3865\n      return;\n    }\n    const context = this._frameManager.executionContextById(event.executionContextId);\n    const values = event.args.map(arg => createJSHandle(context, arg));\n    this._addConsoleMessage(event.type, values, event.stackTrace);\n  }\n\n  /**\n   * @param {!Protocol.Runtime.bindingCalledPayload} event\n   */\n  async _onBindingCalled(event) {\n    const {name, seq, args} = JSON.parse(event.payload);\n    let expression = null;\n    try {\n      const result = await this._pageBindings.get(name)(...args);\n      expression = helper.evaluationString(deliverResult, name, seq, result);\n    } catch (error) {\n      if (error instanceof Error)\n        expression = helper.evaluationString(deliverError, name, seq, error.message, error.stack);\n      else\n        expression = helper.evaluationString(deliverErrorValue, name, seq, error);\n    }\n    this._client.send('Runtime.evaluate', { expression, contextId: event.executionContextId }).catch(debugError);\n\n    /**\n     * @param {string} name\n     * @param {number} seq\n     * @param {*} result\n     */\n    function deliverResult(name, seq, result) {\n      window[name]['callbacks'].get(seq).resolve(result);\n      window[name]['callbacks'].delete(seq);\n    }\n\n    /**\n     * @param {string} name\n     * @param {number} seq\n     * @param {string} message\n     * @param {string} stack\n     */\n    function deliverError(name, seq, message, stack) {\n      const error = new Error(message);\n      error.stack = stack;\n      window[name]['callbacks'].get(seq).reject(error);\n      window[name]['callbacks'].delete(seq);\n    }\n\n    /**\n     * @param {string} name\n     * @param {number} seq\n     * @param {*} value\n     */\n    function deliverErrorValue(name, seq, value) {\n      window[name]['callbacks'].get(seq).reject(value);\n      window[name]['callbacks'].delete(seq);\n    }\n  }\n\n  /**\n   * @param {string} type\n   * @param {!Array<!Puppeteer.JSHandle>} args\n   * @param {Protocol.Runtime.StackTrace=} stackTrace\n   */\n  _addConsoleMessage(type, args, stackTrace) {\n    if (!this.listenerCount(Events.Page.Console)) {\n      args.forEach(arg => arg.dispose());\n      return;\n    }\n    const textTokens = [];\n    for (const arg of args) {\n      const remoteObject = arg._remoteObject;\n      if (remoteObject.objectId)\n        textTokens.push(arg.toString());\n      else\n        textTokens.push(helper.valueFromRemoteObject(remoteObject));\n    }\n    const location = stackTrace && stackTrace.callFrames.length ? {\n      url: stackTrace.callFrames[0].url,\n      lineNumber: stackTrace.callFrames[0].lineNumber,\n      columnNumber: stackTrace.callFrames[0].columnNumber,\n    } : {};\n    const message = new ConsoleMessage(type, textTokens.join(' '), args, location);\n    this.emit(Events.Page.Console, message);\n  }\n\n  _onDialog(event) {\n    let dialogType = null;\n    if (event.type === 'alert')\n      dialogType = Dialog.Type.Alert;\n    else if (event.type === 'confirm')\n      dialogType = Dialog.Type.Confirm;\n    else if (event.type === 'prompt')\n      dialogType = Dialog.Type.Prompt;\n    else if (event.type === 'beforeunload')\n      dialogType = Dialog.Type.BeforeUnload;\n    assert(dialogType, 'Unknown javascript dialog type: ' + event.type);\n    const dialog = new Dialog(this._client, dialogType, event.message, event.defaultPrompt);\n    this.emit(Events.Page.Dialog, dialog);\n  }\n\n  /**\n   * @return {!string}\n   */\n  url() {\n    return this.mainFrame().url();\n  }\n\n  /**\n   * @return {!Promise<string>}\n   */\n  async content() {\n    return await this._frameManager.mainFrame().content();\n  }\n\n  /**\n   * @param {string} html\n   * @param {!{timeout?: number, waitUntil?: string|!Array<string>}=} options\n   */\n  async setContent(html, options) {\n    await this._frameManager.mainFrame().setContent(html, options);\n  }\n\n  /**\n   * @param {string} url\n   * @param {!{referer?: string, timeout?: number, waitUntil?: string|!Array<string>}=} options\n   * @return {!Promise<?Puppeteer.Response>}\n   */\n  async goto(url, options) {\n    return await this._frameManager.mainFrame().goto(url, options);\n  }\n\n  /**\n   * @param {!{timeout?: number, waitUntil?: string|!Array<string>}=} options\n   * @return {!Promise<?Puppeteer.Response>}\n   */\n  async reload(options) {\n    const [response] = await Promise.all([\n      this.waitForNavigation(options),\n      this._client.send('Page.reload')\n    ]);\n    return response;\n  }\n\n  /**\n   * @param {!{timeout?: number, waitUntil?: string|!Array<string>}=} options\n   * @return {!Promise<?Puppeteer.Response>}\n   */\n  async waitForNavigation(options = {}) {\n    return await this._frameManager.mainFrame().waitForNavigation(options);\n  }\n\n  /**\n   * @param {(string|Function)} urlOrPredicate\n   * @param {!{timeout?: number}=} options\n   * @return {!Promise<!Puppeteer.Request>}\n   */\n  async waitForRequest(urlOrPredicate, options = {}) {\n    const {\n      timeout = this._timeoutSettings.timeout(),\n    } = options;\n    return helper.waitForEvent(this._networkManager, Events.NetworkManager.Request, request => {\n      if (helper.isString(urlOrPredicate))\n        return (urlOrPredicate === request.url());\n      if (typeof urlOrPredicate === 'function')\n        return !!(urlOrPredicate(request));\n      return false;\n    }, timeout);\n  }\n\n  /**\n   * @param {(string|Function)} urlOrPredicate\n   * @param {!{timeout?: number}=} options\n   * @return {!Promise<!Puppeteer.Response>}\n   */\n  async waitForResponse(urlOrPredicate, options = {}) {\n    const {\n      timeout = this._timeoutSettings.timeout(),\n    } = options;\n    return helper.waitForEvent(this._networkManager, Events.NetworkManager.Response, response => {\n      if (helper.isString(urlOrPredicate))\n        return (urlOrPredicate === response.url());\n      if (typeof urlOrPredicate === 'function')\n        return !!(urlOrPredicate(response));\n      return false;\n    }, timeout);\n  }\n\n  /**\n   * @param {!{timeout?: number, waitUntil?: string|!Array<string>}=} options\n   * @return {!Promise<?Puppeteer.Response>}\n   */\n  async goBack(options) {\n    return this._go(-1, options);\n  }\n\n  /**\n   * @param {!{timeout?: number, waitUntil?: string|!Array<string>}=} options\n   * @return {!Promise<?Puppeteer.Response>}\n   */\n  async goForward(options) {\n    return this._go(+1, options);\n  }\n\n  /**\n   * @param {!{timeout?: number, waitUntil?: string|!Array<string>}=} options\n   * @return {!Promise<?Puppeteer.Response>}\n   */\n  async _go(delta, options) {\n    const history = await this._client.send('Page.getNavigationHistory');\n    const entry = history.entries[history.currentIndex + delta];\n    if (!entry)\n      return null;\n    const [response] = await Promise.all([\n      this.waitForNavigation(options),\n      this._client.send('Page.navigateToHistoryEntry', {entryId: entry.id}),\n    ]);\n    return response;\n  }\n\n  async bringToFront() {\n    await this._client.send('Page.bringToFront');\n  }\n\n  /**\n   * @param {!{viewport: !Puppeteer.Viewport, userAgent: string}} options\n   */\n  async emulate(options) {\n    await Promise.all([\n      this.setViewport(options.viewport),\n      this.setUserAgent(options.userAgent)\n    ]);\n  }\n\n  /**\n   * @param {boolean} enabled\n   */\n  async setJavaScriptEnabled(enabled) {\n    if (this._javascriptEnabled === enabled)\n      return;\n    this._javascriptEnabled = enabled;\n    await this._client.send('Emulation.setScriptExecutionDisabled', { value: !enabled });\n  }\n\n  /**\n   * @param {boolean} enabled\n   */\n  async setBypassCSP(enabled) {\n    await this._client.send('Page.setBypassCSP', { enabled });\n  }\n\n  /**\n   * @param {?string} mediaType\n   */\n  async emulateMedia(mediaType) {\n    assert(mediaType === 'screen' || mediaType === 'print' || mediaType === null, 'Unsupported media type: ' + mediaType);\n    await this._client.send('Emulation.setEmulatedMedia', {media: mediaType || ''});\n  }\n\n  /**\n   * @param {!Puppeteer.Viewport} viewport\n   */\n  async setViewport(viewport) {\n    const needsReload = await this._emulationManager.emulateViewport(viewport);\n    this._viewport = viewport;\n    if (needsReload)\n      await this.reload();\n  }\n\n  /**\n   * @return {?Puppeteer.Viewport}\n   */\n  viewport() {\n    return this._viewport;\n  }\n\n  /**\n   * @param {Function|string} pageFunction\n   * @param {!Array<*>} args\n   * @return {!Promise<*>}\n   */\n  async evaluate(pageFunction, ...args) {\n    return this._frameManager.mainFrame().evaluate(pageFunction, ...args);\n  }\n\n  /**\n   * @param {Function|string} pageFunction\n   * @param {!Array<*>} args\n   */\n  async evaluateOnNewDocument(pageFunction, ...args) {\n    const source = helper.evaluationString(pageFunction, ...args);\n    await this._client.send('Page.addScriptToEvaluateOnNewDocument', { source });\n  }\n\n  /**\n   * @param {boolean} enabled\n   */\n  async setCacheEnabled(enabled = true) {\n    await this._client.send('Network.setCacheDisabled', {cacheDisabled: !enabled});\n  }\n\n  /**\n   * @param {!ScreenshotOptions=} options\n   * @return {!Promise<!Buffer|!String>}\n   */\n  async screenshot(options = {}) {\n    let screenshotType = null;\n    // options.type takes precedence over inferring the type from options.path\n    // because it may be a 0-length file with no extension created beforehand (i.e. as a temp file).\n    if (options.type) {\n      assert(options.type === 'png' || options.type === 'jpeg', 'Unknown options.type value: ' + options.type);\n      screenshotType = options.type;\n    } else if (options.path) {\n      const mimeType = mime.getType(options.path);\n      if (mimeType === 'image/png')\n        screenshotType = 'png';\n      else if (mimeType === 'image/jpeg')\n        screenshotType = 'jpeg';\n      assert(screenshotType, 'Unsupported screenshot mime type: ' + mimeType);\n    }\n\n    if (!screenshotType)\n      screenshotType = 'png';\n\n    if (options.quality) {\n      assert(screenshotType === 'jpeg', 'options.quality is unsupported for the ' + screenshotType + ' screenshots');\n      assert(typeof options.quality === 'number', 'Expected options.quality to be a number but found ' + (typeof options.quality));\n      assert(Number.isInteger(options.quality), 'Expected options.quality to be an integer');\n      assert(options.quality >= 0 && options.quality <= 100, 'Expected options.quality to be between 0 and 100 (inclusive), got ' + options.quality);\n    }\n    assert(!options.clip || !options.fullPage, 'options.clip and options.fullPage are exclusive');\n    if (options.clip) {\n      assert(typeof options.clip.x === 'number', 'Expected options.clip.x to be a number but found ' + (typeof options.clip.x));\n      assert(typeof options.clip.y === 'number', 'Expected options.clip.y to be a number but found ' + (typeof options.clip.y));\n      assert(typeof options.clip.width === 'number', 'Expected options.clip.width to be a number but found ' + (typeof options.clip.width));\n      assert(typeof options.clip.height === 'number', 'Expected options.clip.height to be a number but found ' + (typeof options.clip.height));\n      assert(options.clip.width !== 0, 'Expected options.clip.width not to be 0.');\n      assert(options.clip.height !== 0, 'Expected options.clip.width not to be 0.');\n    }\n    return this._screenshotTaskQueue.postTask(this._screenshotTask.bind(this, screenshotType, options));\n  }\n\n  /**\n   * @param {\"png\"|\"jpeg\"} format\n   * @param {!ScreenshotOptions=} options\n   * @return {!Promise<!Buffer|!String>}\n   */\n  async _screenshotTask(format, options) {\n    await this._client.send('Target.activateTarget', {targetId: this._target._targetId});\n    let clip = options.clip ? processClip(options.clip) : undefined;\n\n    if (options.fullPage) {\n      const metrics = await this._client.send('Page.getLayoutMetrics');\n      const width = Math.ceil(metrics.contentSize.width);\n      const height = Math.ceil(metrics.contentSize.height);\n\n      // Overwrite clip for full page at all times.\n      clip = { x: 0, y: 0, width, height, scale: 1 };\n      const {\n        isMobile = false,\n        deviceScaleFactor = 1,\n        isLandscape = false\n      } = this._viewport || {};\n      /** @type {!Protocol.Emulation.ScreenOrientation} */\n      const screenOrientation = isLandscape ? { angle: 90, type: 'landscapePrimary' } : { angle: 0, type: 'portraitPrimary' };\n      await this._client.send('Emulation.setDeviceMetricsOverride', { mobile: isMobile, width, height, deviceScaleFactor, screenOrientation });\n    }\n    const shouldSetDefaultBackground = options.omitBackground && format === 'png';\n    if (shouldSetDefaultBackground)\n      await this._client.send('Emulation.setDefaultBackgroundColorOverride', { color: { r: 0, g: 0, b: 0, a: 0 } });\n    const result = await this._client.send('Page.captureScreenshot', { format, quality: options.quality, clip });\n    if (shouldSetDefaultBackground)\n      await this._client.send('Emulation.setDefaultBackgroundColorOverride');\n\n    if (options.fullPage && this._viewport)\n      await this.setViewport(this._viewport);\n\n    const buffer = options.encoding === 'base64' ? result.data : Buffer.from(result.data, 'base64');\n    if (options.path)\n      await writeFileAsync(options.path, buffer);\n    return buffer;\n\n    function processClip(clip) {\n      const x = Math.round(clip.x);\n      const y = Math.round(clip.y);\n      const width = Math.round(clip.width + clip.x - x);\n      const height = Math.round(clip.height + clip.y - y);\n      return {x, y, width, height, scale: 1};\n    }\n  }\n\n  /**\n   * @param {!PDFOptions=} options\n   * @return {!Promise<!Buffer>}\n   */\n  async pdf(options = {}) {\n    const {\n      scale = 1,\n      displayHeaderFooter = false,\n      headerTemplate = '',\n      footerTemplate = '',\n      printBackground = false,\n      landscape = false,\n      pageRanges = '',\n      preferCSSPageSize = false,\n      margin = {},\n      path = null\n    } = options;\n\n    let paperWidth = 8.5;\n    let paperHeight = 11;\n    if (options.format) {\n      const format = Page.PaperFormats[options.format.toLowerCase()];\n      assert(format, 'Unknown paper format: ' + options.format);\n      paperWidth = format.width;\n      paperHeight = format.height;\n    } else {\n      paperWidth = convertPrintParameterToInches(options.width) || paperWidth;\n      paperHeight = convertPrintParameterToInches(options.height) || paperHeight;\n    }\n\n    const marginTop = convertPrintParameterToInches(margin.top) || 0;\n    const marginLeft = convertPrintParameterToInches(margin.left) || 0;\n    const marginBottom = convertPrintParameterToInches(margin.bottom) || 0;\n    const marginRight = convertPrintParameterToInches(margin.right) || 0;\n\n    const result = await this._client.send('Page.printToPDF', {\n      landscape,\n      displayHeaderFooter,\n      headerTemplate,\n      footerTemplate,\n      printBackground,\n      scale,\n      paperWidth,\n      paperHeight,\n      marginTop,\n      marginBottom,\n      marginLeft,\n      marginRight,\n      pageRanges,\n      preferCSSPageSize\n    });\n    const buffer = Buffer.from(result.data, 'base64');\n    if (path !== null)\n      await writeFileAsync(path, buffer);\n    return buffer;\n  }\n\n  /**\n   * @return {!Promise<string>}\n   */\n  async title() {\n    return this.mainFrame().title();\n  }\n\n  /**\n   * @param {!{runBeforeUnload: (boolean|undefined)}=} options\n   */\n  async close(options = {runBeforeUnload: undefined}) {\n    assert(!!this._client._connection, 'Protocol error: Connection closed. Most likely the page has been closed.');\n    const runBeforeUnload = !!options.runBeforeUnload;\n    if (runBeforeUnload) {\n      await this._client.send('Page.close');\n    } else {\n      await this._client._connection.send('Target.closeTarget', { targetId: this._target._targetId });\n      await this._target._isClosedPromise;\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isClosed() {\n    return this._closed;\n  }\n\n  /**\n   * @return {!Mouse}\n   */\n  get mouse() {\n    return this._mouse;\n  }\n\n  /**\n   * @param {string} selector\n   * @param {!{delay?: number, button?: \"left\"|\"right\"|\"middle\", clickCount?: number}=} options\n   */\n  click(selector, options = {}) {\n    return this.mainFrame().click(selector, options);\n  }\n\n  /**\n   * @param {string} selector\n   */\n  focus(selector) {\n    return this.mainFrame().focus(selector);\n  }\n\n  /**\n   * @param {string} selector\n   */\n  hover(selector) {\n    return this.mainFrame().hover(selector);\n  }\n\n  /**\n   * @param {string} selector\n   * @param {!Array<string>} values\n   * @return {!Promise<!Array<string>>}\n   */\n  select(selector, ...values) {\n    return this.mainFrame().select(selector, ...values);\n  }\n\n  /**\n   * @param {string} selector\n   */\n  tap(selector) {\n    return this.mainFrame().tap(selector);\n  }\n\n  /**\n   * @param {string} selector\n   * @param {string} text\n   * @param {{delay: (number|undefined)}=} options\n   */\n  type(selector, text, options) {\n    return this.mainFrame().type(selector, text, options);\n  }\n\n  /**\n   * @param {(string|number|Function)} selectorOrFunctionOrTimeout\n   * @param {!Object=} options\n   * @param {!Array<*>} args\n   * @return {!Promise<!Puppeteer.JSHandle>}\n   */\n  waitFor(selectorOrFunctionOrTimeout, options = {}, ...args) {\n    return this.mainFrame().waitFor(selectorOrFunctionOrTimeout, options, ...args);\n  }\n\n  /**\n   * @param {string} selector\n   * @param {!{visible?: boolean, hidden?: boolean, timeout?: number}=} options\n   * @return {!Promise<?Puppeteer.ElementHandle>}\n   */\n  waitForSelector(selector, options = {}) {\n    return this.mainFrame().waitForSelector(selector, options);\n  }\n\n  /**\n   * @param {string} xpath\n   * @param {!{visible?: boolean, hidden?: boolean, timeout?: number}=} options\n   * @return {!Promise<?Puppeteer.ElementHandle>}\n   */\n  waitForXPath(xpath, options = {}) {\n    return this.mainFrame().waitForXPath(xpath, options);\n  }\n\n  /**\n   * @param {Function} pageFunction\n   * @param {!{polling?: string|number, timeout?: number}=} options\n   * @param {!Array<*>} args\n   * @return {!Promise<!Puppeteer.JSHandle>}\n   */\n  waitForFunction(pageFunction, options = {}, ...args) {\n    return this.mainFrame().waitForFunction(pageFunction, options, ...args);\n  }\n}\n\n/**\n * @typedef {Object} PDFOptions\n * @property {number=} scale\n * @property {boolean=} displayHeaderFooter\n * @property {string=} headerTemplate\n * @property {string=} footerTemplate\n * @property {boolean=} printBackground\n * @property {boolean=} landscape\n * @property {string=} pageRanges\n * @property {string=} format\n * @property {string|number=} width\n * @property {string|number=} height\n * @property {boolean=} preferCSSPageSize\n * @property {!{top?: string|number, bottom?: string|number, left?: string|number, right?: string|number}=} margin\n * @property {string=} path\n */\n\n/**\n * @typedef {Object} Metrics\n * @property {number=} Timestamp\n * @property {number=} Documents\n * @property {number=} Frames\n * @property {number=} JSEventListeners\n * @property {number=} Nodes\n * @property {number=} LayoutCount\n * @property {number=} RecalcStyleCount\n * @property {number=} LayoutDuration\n * @property {number=} RecalcStyleDuration\n * @property {number=} ScriptDuration\n * @property {number=} TaskDuration\n * @property {number=} JSHeapUsedSize\n * @property {number=} JSHeapTotalSize\n */\n\n/**\n * @typedef {Object} ScreenshotOptions\n * @property {string=} type\n * @property {string=} path\n * @property {boolean=} fullPage\n * @property {{x: number, y: number, width: number, height: number}=} clip\n * @property {number=} quality\n * @property {boolean=} omitBackground\n * @property {string=} encoding\n */\n\n/** @type {!Set<string>} */\nconst supportedMetrics = new Set([\n  'Timestamp',\n  'Documents',\n  'Frames',\n  'JSEventListeners',\n  'Nodes',\n  'LayoutCount',\n  'RecalcStyleCount',\n  'LayoutDuration',\n  'RecalcStyleDuration',\n  'ScriptDuration',\n  'TaskDuration',\n  'JSHeapUsedSize',\n  'JSHeapTotalSize',\n]);\n\n/** @enum {!{width: number, height: number}} */\nPage.PaperFormats = {\n  letter: {width: 8.5, height: 11},\n  legal: {width: 8.5, height: 14},\n  tabloid: {width: 11, height: 17},\n  ledger: {width: 17, height: 11},\n  a0: {width: 33.1, height: 46.8 },\n  a1: {width: 23.4, height: 33.1 },\n  a2: {width: 16.5, height: 23.4 },\n  a3: {width: 11.7, height: 16.5 },\n  a4: {width: 8.27, height: 11.7 },\n  a5: {width: 5.83, height: 8.27 },\n  a6: {width: 4.13, height: 5.83 },\n};\n\nconst unitToPixels = {\n  'px': 1,\n  'in': 96,\n  'cm': 37.8,\n  'mm': 3.78\n};\n\n/**\n * @param {(string|number|undefined)} parameter\n * @return {(number|undefined)}\n */\nfunction convertPrintParameterToInches(parameter) {\n  if (typeof parameter === 'undefined')\n    return undefined;\n  let pixels;\n  if (helper.isNumber(parameter)) {\n    // Treat numbers as pixel values to be aligned with phantom's paperSize.\n    pixels = /** @type {number} */ (parameter);\n  } else if (helper.isString(parameter)) {\n    const text = /** @type {string} */ (parameter);\n    let unit = text.substring(text.length - 2).toLowerCase();\n    let valueText = '';\n    if (unitToPixels.hasOwnProperty(unit)) {\n      valueText = text.substring(0, text.length - 2);\n    } else {\n      // In case of unknown unit try to parse the whole parameter as number of pixels.\n      // This is consistent with phantom's paperSize behavior.\n      unit = 'px';\n      valueText = text;\n    }\n    const value = Number(valueText);\n    assert(!isNaN(value), 'Failed to parse parameter value: ' + text);\n    pixels = value * unitToPixels[unit];\n  } else {\n    throw new Error('page.pdf() Cannot handle parameter type: ' + (typeof parameter));\n  }\n  return pixels / 96;\n}\n\n/**\n * @typedef {Object} Network.Cookie\n * @property {string} name\n * @property {string} value\n * @property {string} domain\n * @property {string} path\n * @property {number} expires\n * @property {number} size\n * @property {boolean} httpOnly\n * @property {boolean} secure\n * @property {boolean} session\n * @property {(\"Strict\"|\"Lax\")=} sameSite\n */\n\n\n/**\n * @typedef {Object} Network.CookieParam\n * @property {string} name\n * @property {string} value\n * @property {string=} url\n * @property {string=} domain\n * @property {string=} path\n * @property {number=} expires\n * @property {boolean=} httpOnly\n * @property {boolean=} secure\n * @property {(\"Strict\"|\"Lax\")=} sameSite\n */\n\n/**\n * @typedef {Object} ConsoleMessage.Location\n * @property {string=} url\n * @property {number=} lineNumber\n * @property {number=} columnNumber\n */\n\nclass ConsoleMessage {\n  /**\n   * @param {string} type\n   * @param {string} text\n   * @param {!Array<!Puppeteer.JSHandle>} args\n   * @param {ConsoleMessage.Location} location\n   */\n  constructor(type, text, args, location = {}) {\n    this._type = type;\n    this._text = text;\n    this._args = args;\n    this._location = location;\n  }\n\n  /**\n   * @return {string}\n   */\n  type() {\n    return this._type;\n  }\n\n  /**\n   * @return {string}\n   */\n  text() {\n    return this._text;\n  }\n\n  /**\n   * @return {!Array<!Puppeteer.JSHandle>}\n   */\n  args() {\n    return this._args;\n  }\n\n  /**\n   * @return {Object}\n   */\n  location() {\n    return this._location;\n  }\n}\n\n\nmodule.exports = {Page, ConsoleMessage};\n"]},"metadata":{},"sourceType":"script"}